@model IEnumerable<MessageVM>

<div class="chat-box">
    <div class="messages">
        @foreach (var message in Model)
        {
            <div class="message @(message.IsAdmin ? "admin" : "user")">
                <div class="avatar">
                    <img src="@(message.IsAdmin ? "/assets/img/admin-avatar.png" : "/assets/img/user-avatar.png")" alt="Avatar" />
                </div>
                <div class="text">
                    @message.Text
                </div>
                <div class="date">
                    @message.CreateDate?.ToString("yyyy/MM/dd HH:mm:ss")
                </div>
            </div>
        }
    </div>
    <div class="message-input">
        <form asp-action="SendMessage" method="post" enctype="multipart/form-data">
            <div class="input-group">
                @foreach (var m in Model)
                {
                    <input type="text" class="form-control" placeholder="Type your message..." asp-for=@m.Text />
                }
                <div class="input-group-append">
                    <label class="btn btn-secondary btn-file">
                        <i class="fa fa-paperclip"></i>
                        @foreach (var n in Model)
                        {
                            <input type="file" class="d-none" asp-for=@n.FilePath>
                        }
                    </label>
                    <button type="submit" class="btn btn-primary">
                        <i class="fa fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

@section Styles {
    <style>
        .chat-box {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            max-width: 600px;
            margin: auto;
        }

        .messages {
            max-height: 300px;
            overflow-y: auto;
            padding-bottom: 10px;
        }

        .message {
            display: flex;
            align-items: flex-start;
            margin-bottom: 10px;
        }

            .message.admin {
                justify-content: flex-end;
            }

            .message .avatar img {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                margin-right: 10px;
            }

            .message.admin .avatar img {
                margin-left: 10px;
                margin-right: 0;
            }

            .message .text {
                background-color: #f1f1f1;
                padding: 10px;
                border-radius: 5px;
                max-width: 60%;
            }

            .message.admin .text {
                background-color: #007bff;
                color: white;
            }

            .message .date {
                font-size: 0.8em;
                color: #999;
                margin-left: 10px;
            }

            .message.admin .date {
                margin-left: 0;
                margin-right: 10px;
            }

        .message-input {
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }

        .input-group {
            display: flex;
        }

            .input-group .form-control {
                flex: 1;
            }

            .input-group .btn-file {
                border: none;
                background: none;
                cursor: pointer;
            }

                .input-group .btn-file i {
                    font-size: 1.2em;
                }

            .input-group .btn-primary {
                border: none;
                background-color: #007bff;
                color: white;
            }
    </style>
}